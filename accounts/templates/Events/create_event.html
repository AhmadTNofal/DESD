<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Event</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'accounts/css/events.css' %}">
    <script>
        function toggleEventType() {
            var isOnline = document.getElementById("onlineEventCheckbox").checked;
            document.getElementById("locationField").classList.toggle("hidden", isOnline);
            document.getElementById("virtualLinkField").classList.toggle("hidden", !isOnline);
        }

        document.addEventListener("DOMContentLoaded", function() {
            let today = new Date().toISOString().split('T')[0]; // Get today's date in YYYY-MM-DD format
            document.getElementById("eventDate").setAttribute("min", today);
        });
    </script>
</head>
<body>
    <div class="container">
        <h2>Create Event</h2>

        {% if error %}
            <p class="error">{{ error }}</p>
        {% endif %}

        <form method="POST">
            {% csrf_token %}

            <label for="id_communityID">Select Community:</label>
            <select name="communityID" required>
                <option value="" disabled selected>Select a community</option>
                {% for community in communities %}
                    <option value="{{ community.0 }}">{{ community.1 }}</option>
                {% endfor %}
            </select>

            <label for="id_eventTitle">Event Title:</label>
            {{ form.eventTitle }}

            <label for="id_eventDate">Event Date:</label>
            <input type="date" id="eventDate" name="eventDate" required>


            <label for="id_eventTime">Event Time:</label>
            {{ form.eventTime }}

            <label>
                <input type="checkbox" id="onlineEventCheckbox" name="onlineEvent" onclick="toggleEventType()"> Online Event
            </label>

            <div id="locationField">
                <label for="id_location">Location:</label>
                {{ form.location }}
            </div>

            <div id="virtualLinkField" class="hidden">
                <label for="id_virtualLink">Virtual Link:</label>
                {{ form.virtualLink }}
            </div>

            <button type="submit">Create Event</button>
        </form>

        <a href="{% url 'events' %}" class="back-link">Back to Events</a>
    </div>
</body>
</html>
