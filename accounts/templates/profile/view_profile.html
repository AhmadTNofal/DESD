<!DOCTYPE html>
<html>
<head>
    <title>Search</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'accounts/css/home.css' %}">
</head>
<body>
    <div class="profile-container">
        <!-- Username -->
        <h2 class="username">{{ user.username }}</h2>

        <!-- Profile Picture and Name -->
        <div class="profile-header">
            {% if profile and profile.profile_picture %}
            <img src="{{ profile.profile_picture }}" alt="Profile Picture" class="profile-picture">
            {% elif user.profile_picture %}
                <img src="{{ user.profile_picture }}" alt="Profile Picture" class="profile-picture">
            {% else %}
                <img src="{% static 'accounts/images/default-profile.png' %}" alt="Default Profile Picture" class="profile-picture">
            {% endif %}
            <span class="full-name">{{ user.surname }}</span>
        </div>

        <!-- Bio -->
        <p class="bio">{{ profile.bio|default:"Not provided" }}</p>

        <!-- Additional Info -->
        <div class="profile-details">
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Major:</strong> {{ profile.major|default:"Not provided" }}</p>
            <p><strong>Academic Year:</strong> {{ profile.academicYear|default:"Not provided" }}</p>
            <p><strong>Campus Involvement:</strong> {{ profile.campusInvolvement|default:"Not provided" }}</p>
        </div>
    </div>
<!-- User's Uploaded Pictures -->
<div class="user-uploads">
    <h3>Uploaded Pictures</h3>
    <div class="uploaded-pictures">
        {% for post in posts %}
            {% if post.image %}
                <div class="uploaded-image">
                    <img src="{{ post.image }}" alt="User Uploaded Image"
                         onclick="openModal('{{ post.image }}', '{{ post.content|escapejs }}')">
                </div>
            {% endif %}
        {% empty %}
            <p>No uploads yet.</p>
        {% endfor %}
    </div>
</div>

<!-- Image Modal -->
<div id="imageModal" class="modal" onclick="closeModal()">
    <span class="modal-close" onclick="closeModal()">&times;</span>
    <div class="modal-content" onclick="event.stopPropagation();">
        <img id="modalImage" src="" alt="Full Image">
        <p class="modal-caption" id="modalCaption"></p>
    </div>
</div>

<!-- Modal JavaScript -->
<script>
    function openModal(imageUrl, caption) {
        document.getElementById("modalImage").src = imageUrl;
        document.getElementById("modalCaption").textContent = caption;
        document.getElementById("imageModal").style.display = "flex";
    }

    function closeModal() {
        document.getElementById("imageModal").style.display = "none";
    }
</script>
</body>
</html>